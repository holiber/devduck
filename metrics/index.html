<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Devduck Metrics Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;margin:40px;background:#fafafa;color:#111}
    h1{font-size:1.6rem;margin:0 0 8px}
    .sub{color:#444;margin:0 0 18px}
    .card{background:#fff;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.06);padding:16px 18px;margin:16px 0}
    table{border-collapse:collapse;width:100%}
    th,td{padding:10px 12px;text-align:left;border-bottom:1px solid #eee;font-size:14px}
    th{background:#f5f5f5}
    .pos{color:#c0392b}
    .neg{color:#27ae60}
    code{background:#f3f3f3;padding:2px 6px;border-radius:6px}
  </style>
</head>
<body>
  <h1>Devduck Metrics Dashboard</h1>
  <p class="sub"><strong>Generated:</strong> 12/28/2025, 11:42:43 AM &nbsp; <strong>SHA:</strong> <code>7246770e62bafe2e64ba84f49458ca44304db8ce</code></p>

  <div class="card">
    <table>
      <thead>
        <tr><th>Metric</th><th>Current</th><th>Î” vs baseline</th></tr>
      </thead>
      <tbody>
        <tr>
          <td>ğŸ— Build time</td>
          <td>n/a</td>
          <td class="">n/a</td>
        </tr>
        <tr>
          <td>âš¡ Dev ready</td>
          <td>n/a</td>
          <td class="">n/a</td>
        </tr>
        <tr>
          <td>ğŸ“¦ Package size (npm pack)</td>
          <td>2.81 MB</td>
          <td class="pos">1.03 KB</td>
        </tr>
        <tr>
          <td>ğŸ§ª Unit tests</td>
          <td>91 tests / 29080ms</td>
          <td></td>
        </tr>
        <tr>
          <td>ğŸ§ª E2E (installer)</td>
          <td>34 tests / 27300ms</td>
          <td></td>
        </tr>
        <tr>
          <td>ğŸ—‚ dist size</td>
          <td>n/a</td>
          <td class="">n/a</td>
        </tr>
        <tr>
          <td>ğŸ§± build output size</td>
          <td>n/a</td>
          <td class="">n/a</td>
        </tr>
        <tr>
          <td>ğŸ§¾ Script code lines</td>
          <td>34,459</td>
          <td class="">0</td>
        </tr>
        <tr>
          <td>ğŸ“š Total text lines</td>
          <td>45,793</td>
          <td class="pos">22</td>
        </tr>
        <tr>
          <td>ğŸ“œ Huge scripts (&gt;1000 LOC)</td>
          <td>3</td>
          <td class="">0</td>
        </tr>
        <tr>
          <td>ğŸ² Flaky tests (retried)</td>
          <td>0</td>
          <td class="">0</td>
        </tr>
        <tr>
          <td>ğŸ§ª Coverage (lines)</td>
          <td>63.39%</td>
          <td class="">0.00%</td>
        </tr>
        <tr>
          <td>ğŸ¢ Slow tests (&gt;20s)</td>
          <td>0</td>
          <td class="">0</td>
        </tr>
        <tr>
          <td>ğŸ§¬ Duplication (copy/paste)</td>
          <td>41.65%</td>
          <td class="">0.00%</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="card">
    <canvas id="trend" height="120"></canvas>
  </div>

  <div class="card">
    <div><strong>Raw JSON:</strong>
      <a href="./current.json">current.json</a> Â·
      <a href="./compare-baseline.json">compare-baseline.json</a> Â·
      <a href="./baseline.json">baseline.json</a> Â·
      <a href="./diff.json">diff.json</a> Â·
      <a href="./history.json">history.json</a>
    </div>
  </div>

  <script>
    const history = [{"meta":{"collectedAt":"2025-12-28T10:10:05.419Z","repository":"holiber/devduck","eventName":"push","sha":"96b1c5df37b923a18d4ded9a62ba1d268c7a9fd2","ref":"refs/heads/main","runId":"20552267525","runAttempt":"1","node":"v24.12.0"},"commands":{"npm_test":{"name":"npm_test","command":"npm run test:unit","exitCode":0,"durationMs":23365,"collectedAt":"2025-12-28T10:08:53.398Z"},"pw_installer":{"name":"pw_installer","command":"npx playwright test -c tests/installer/playwright.config.ts --reporter=list","exitCode":0,"durationMs":28624,"collectedAt":"2025-12-28T10:09:37.726Z"},"npm_pack":{"name":"npm-pack","command":"npm pack --silent","exitCode":0,"durationMs":770}},"sizes":{"npm_pack":{"bytes":2941806}},"tests":{"unit":{"total":91,"suites":16,"passed":83,"failed":0,"skipped":8,"reportedDurationMs":22574.235809,"durationMs":23365,"exitCode":0},"e2e_installer":{"total":34,"passed":34,"reportedDurationMs":27500,"durationMs":28624,"exitCode":0}},"notes":["BUILD_COMMAND not set; build metric skipped.","DEV_COMMAND not set; dev startup metric skipped."]},{"meta":{"collectedAt":"2025-12-28T10:53:33.775Z","repository":"holiber/devduck","eventName":"push","sha":"8fab5b1cf3e1cfc8c52c8418e1b15a2afa9a91e6","ref":"refs/heads/main","runId":"20552735053","runAttempt":"1","node":"v24.12.0"},"commands":{"npm_test":{"name":"npm_test","command":"npm run test:unit","exitCode":0,"durationMs":22053,"collectedAt":"2025-12-28T10:52:42.010Z"},"pw_installer":{"name":"pw_installer","command":"npx playwright test -c tests/installer/playwright.config.ts --reporter=list","exitCode":0,"durationMs":30066,"collectedAt":"2025-12-28T10:53:33.091Z"},"npm_pack":{"name":"npm-pack","command":"npm pack --silent","exitCode":0,"durationMs":734}},"sizes":{"npm_pack":{"bytes":2945108}},"tests":{"unit":{"total":91,"suites":16,"passed":83,"failed":0,"skipped":8,"reportedDurationMs":21400.102941,"durationMs":22053,"exitCode":0},"e2e_installer":{"total":34,"passed":34,"reportedDurationMs":29000,"durationMs":30066,"exitCode":0},"flaky":{"count":0}},"code":{"scriptCodeLines":34108,"totalTextLines":43475,"hugeScripts":3},"notes":["BUILD_COMMAND not set; build metric skipped.","DEV_COMMAND not set; dev startup metric skipped."]},{"meta":{"collectedAt":"2025-12-28T11:00:46.516Z","repository":"holiber/devduck","eventName":"push","sha":"94442657f68fda73fb32e38c9532b26bb6d14459","ref":"refs/heads/main","runId":"20552798195","runAttempt":"1","node":"v24.12.0"},"commands":{"npm_test":{"name":"npm_test","command":"npm run test:unit","exitCode":0,"durationMs":23807,"collectedAt":"2025-12-28T10:59:53.875Z"},"pw_installer":{"name":"pw_installer","command":"npx playwright test -c tests/installer/playwright.config.ts --reporter=list","exitCode":0,"durationMs":30963,"collectedAt":"2025-12-28T11:00:45.753Z"},"npm_pack":{"name":"npm-pack","command":"npm pack --silent","exitCode":0,"durationMs":785}},"sizes":{"npm_pack":{"bytes":2945814}},"tests":{"unit":{"total":91,"suites":16,"passed":83,"failed":0,"skipped":8,"reportedDurationMs":22986.224308,"durationMs":23807,"exitCode":0},"e2e_installer":{"total":34,"passed":34,"reportedDurationMs":29700,"durationMs":30963,"exitCode":0},"flaky":{"count":0}},"code":{"scriptCodeLines":34125,"totalTextLines":43492,"hugeScripts":3},"notes":["BUILD_COMMAND not set; build metric skipped.","DEV_COMMAND not set; dev startup metric skipped."]},{"meta":{"collectedAt":"2025-12-28T11:31:30.777Z","repository":"holiber/devduck","eventName":"push","sha":"334126c5c3467498709318a624da6c8e6af496b0","ref":"refs/heads/main","runId":"20553136926","runAttempt":"1","node":"v24.12.0"},"commands":{"npm_test":{"name":"npm_test","command":"npx c8 --reporter=json-summary --report-dir .cache/coverage npm run test:unit","exitCode":0,"durationMs":31444,"collectedAt":"2025-12-28T11:30:42.293Z"},"pw_installer":{"name":"pw_installer","command":"npx playwright test -c tests/installer/playwright.config.ts","exitCode":0,"durationMs":31289,"collectedAt":"2025-12-28T11:31:29.952Z"},"npm_pack":{"name":"npm-pack","command":"npm pack --silent","exitCode":0,"durationMs":789}},"sizes":{"npm_pack":{"bytes":2949005}},"tests":{"unit":{"total":91,"suites":16,"passed":83,"failed":0,"skipped":8,"reportedDurationMs":28629.048568,"durationMs":31444,"exitCode":0},"e2e_installer":{"total":34,"passed":34,"reportedDurationMs":30100,"durationMs":31289,"exitCode":0},"flaky":{"count":0}},"code":{"scriptCodeLines":34459,"totalTextLines":45771,"hugeScripts":3},"quality":{"coverage":{"linesPct":63.39,"statementsPct":63.39,"branchesPct":61.29,"functionsPct":64.82},"slowTests":{"thresholdMs":20000,"count":0,"bySuite":{"unit":{"count":0,"top":[]}}},"duplication":{"duplicatedPct":41.65,"duplicatedLines":239729,"totalLines":575626}},"notes":["BUILD_COMMAND not set; build metric skipped.","DEV_COMMAND not set; dev startup metric skipped."]},{"meta":{"collectedAt":"2025-12-28T11:40:57.408Z","repository":"holiber/devduck","eventName":"push","sha":"7246770e62bafe2e64ba84f49458ca44304db8ce","ref":"refs/heads/main","runId":"20553240119","runAttempt":"1","node":"v24.12.0"},"commands":{"npm_test":{"name":"npm_test","command":"npx c8 --reporter=json-summary --report-dir .cache/coverage npm run test:unit","exitCode":0,"durationMs":31989,"collectedAt":"2025-12-28T11:40:12.109Z"},"pw_installer":{"name":"pw_installer","command":"npx playwright test -c tests/installer/playwright.config.ts","exitCode":0,"durationMs":28490,"collectedAt":"2025-12-28T11:40:56.901Z"},"npm_pack":{"name":"npm-pack","command":"npm pack --silent","exitCode":0,"durationMs":786}},"sizes":{"npm_pack":{"bytes":2950057}},"tests":{"unit":{"total":91,"suites":16,"passed":83,"failed":0,"skipped":8,"reportedDurationMs":29080.027813,"durationMs":31989,"exitCode":0},"e2e_installer":{"total":34,"passed":34,"reportedDurationMs":27300,"durationMs":28490,"exitCode":0},"flaky":{"count":0}},"code":{"scriptCodeLines":34459,"totalTextLines":45793,"hugeScripts":3},"quality":{"coverage":{"linesPct":63.39,"statementsPct":63.39,"branchesPct":61.29,"functionsPct":64.82},"slowTests":{"thresholdMs":20000,"count":0,"bySuite":{"unit":{"count":0,"top":[]}}},"duplication":{"duplicatedPct":41.65,"duplicatedLines":239729,"totalLines":575626}},"notes":["BUILD_COMMAND not set; build metric skipped.","DEV_COMMAND not set; dev startup metric skipped."]}];
    const labels = history.map(h => (h?.meta?.collectedAt || h?.meta?.timestamp || h?.timestamp || '').toString().slice(0, 10));
    const build = history.map(h => (h?.commands?.build?.durationMs ?? null));
    const dev = history.map(h => (h?.commands?.dev_start?.readyAtMs ?? null));
    const pack = history.map(h => (h?.sizes?.npm_pack?.bytes ?? null));

    const ctx = document.getElementById('trend').getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [
          { label: 'Build (ms)', data: build, borderColor: '#3498db', tension: 0.25, spanGaps: true },
          { label: 'Dev ready (ms)', data: dev, borderColor: '#9b59b6', tension: 0.25, spanGaps: true },
          { label: 'npm pack (bytes)', data: pack, borderColor: '#2ecc71', tension: 0.25, spanGaps: true, yAxisID: 'y2' }
        ]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'bottom' } },
        scales: {
          y: { type: 'linear', position: 'left', title: { display: true, text: 'ms' } },
          y2: { type: 'linear', position: 'right', grid: { drawOnChartArea: false }, title: { display: true, text: 'bytes' } }
        }
      }
    });
  </script>
</body>
</html>