<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Devduck Metrics Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;margin:40px;background:#fafafa;color:#111}
    h1{font-size:1.6rem;margin:0 0 8px}
    .sub{color:#444;margin:0 0 18px}
    .card{background:#fff;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.06);padding:16px 18px;margin:16px 0}
    table{border-collapse:collapse;width:100%}
    th,td{padding:10px 12px;text-align:left;border-bottom:1px solid #eee;font-size:14px}
    th{background:#f5f5f5}
    .pos{color:#c0392b}
    .neg{color:#27ae60}
    code{background:#f3f3f3;padding:2px 6px;border-radius:6px}
  </style>
</head>
<body>
  <h1>Devduck Metrics Dashboard</h1>
  <p class="sub"><strong>Generated:</strong> 12/28/2025, 10:10:06 AM &nbsp; <strong>SHA:</strong> <code>96b1c5df37b923a18d4ded9a62ba1d268c7a9fd2</code></p>

  <div class="card">
    <table>
      <thead>
        <tr><th>Metric</th><th>Current</th><th>Î” vs baseline</th></tr>
      </thead>
      <tbody>
        <tr>
          <td>ğŸ— Build time</td>
          <td>n/a</td>
          <td class="">n/a</td>
        </tr>
        <tr>
          <td>âš¡ Dev ready</td>
          <td>n/a</td>
          <td class="">n/a</td>
        </tr>
        <tr>
          <td>ğŸ“¦ Package size (npm pack)</td>
          <td>2.81 MB</td>
          <td class="pos">2.81 MB</td>
        </tr>
        <tr>
          <td>ğŸ§ª Unit tests</td>
          <td>91 tests / 22574ms</td>
          <td></td>
        </tr>
        <tr>
          <td>ğŸ§ª E2E (installer)</td>
          <td>34 tests / 27500ms</td>
          <td></td>
        </tr>
        <tr>
          <td>ğŸ—‚ dist size</td>
          <td>n/a</td>
          <td class="">n/a</td>
        </tr>
        <tr>
          <td>ğŸ§± build output size</td>
          <td>n/a</td>
          <td class="">n/a</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="card">
    <canvas id="trend" height="120"></canvas>
  </div>

  <div class="card">
    <div><strong>Raw JSON:</strong>
      <a href="./current.json">current.json</a> Â·
      <a href="./compare-baseline.json">compare-baseline.json</a> Â·
      <a href="./baseline.json">baseline.json</a> Â·
      <a href="./diff.json">diff.json</a> Â·
      <a href="./history.json">history.json</a>
    </div>
  </div>

  <script>
    const history = [{"meta":{"collectedAt":"2025-12-28T10:10:05.419Z","repository":"holiber/devduck","eventName":"push","sha":"96b1c5df37b923a18d4ded9a62ba1d268c7a9fd2","ref":"refs/heads/main","runId":"20552267525","runAttempt":"1","node":"v24.12.0"},"commands":{"npm_test":{"name":"npm_test","command":"npm run test:unit","exitCode":0,"durationMs":23365,"collectedAt":"2025-12-28T10:08:53.398Z"},"pw_installer":{"name":"pw_installer","command":"npx playwright test -c tests/installer/playwright.config.ts --reporter=list","exitCode":0,"durationMs":28624,"collectedAt":"2025-12-28T10:09:37.726Z"},"npm_pack":{"name":"npm-pack","command":"npm pack --silent","exitCode":0,"durationMs":770}},"sizes":{"npm_pack":{"bytes":2941806}},"tests":{"unit":{"total":91,"suites":16,"passed":83,"failed":0,"skipped":8,"reportedDurationMs":22574.235809,"durationMs":23365,"exitCode":0},"e2e_installer":{"total":34,"passed":34,"reportedDurationMs":27500,"durationMs":28624,"exitCode":0}},"notes":["BUILD_COMMAND not set; build metric skipped.","DEV_COMMAND not set; dev startup metric skipped."]}];
    const labels = history.map(h => (h?.meta?.collectedAt || h?.meta?.timestamp || h?.timestamp || '').toString().slice(0, 10));
    const build = history.map(h => (h?.commands?.build?.durationMs ?? null));
    const dev = history.map(h => (h?.commands?.dev_start?.readyAtMs ?? null));
    const pack = history.map(h => (h?.sizes?.npm_pack?.bytes ?? null));

    const ctx = document.getElementById('trend').getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [
          { label: 'Build (ms)', data: build, borderColor: '#3498db', tension: 0.25, spanGaps: true },
          { label: 'Dev ready (ms)', data: dev, borderColor: '#9b59b6', tension: 0.25, spanGaps: true },
          { label: 'npm pack (bytes)', data: pack, borderColor: '#2ecc71', tension: 0.25, spanGaps: true, yAxisID: 'y2' }
        ]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'bottom' } },
        scales: {
          y: { type: 'linear', position: 'left', title: { display: true, text: 'ms' } },
          y2: { type: 'linear', position: 'right', grid: { drawOnChartArea: false }, title: { display: true, text: 'bytes' } }
        }
      }
    });
  </script>
</body>
</html>