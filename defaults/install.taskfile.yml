version: '3'
output: interleaved

vars:
  # Resolve Barducks root relative to this taskfile: <barducksRoot>/defaults/install.taskfile.yml
  BARDUCKS_ROOT: '{{.TASKFILE_DIR}}/..'
  WORKSPACE_ROOT: '{{ default "." .WORKSPACE_ROOT }}'

tasks:
  sync:
    desc: "Generate .cache/taskfile.generated.yml from workspace config"
    cmds:
      - tsx {{.BARDUCKS_ROOT}}/scripts/barducks-cli.ts sync {{.WORKSPACE_ROOT}}

  install:
    desc: "Run full installation sequence (Steps 1â€“7)"
    deps: [sync]
    cmds:
      - task -t .cache/taskfile.generated.yml install

