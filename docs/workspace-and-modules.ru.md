# Workspace и modules в DevDuck (простое объяснение)

## Что такое **workspace** в DevDuck

**Workspace** — это папка, которая является “контейнером” вашего окружения разработки для DevDuck.
Внутри workspace DevDuck:

- хранит **единый конфиг** `workspace.config.yml` (это “source of truth” для установки и поведения);
- подключает ваши проекты (обычно в `projects/`);
- устанавливает и генерирует интеграцию для IDE/агентов (например, `.cursor/commands`, `.cursor/rules`, `.cursor/mcp.json`);
- хранит рабочие артефакты/кэш (например, `.cache/`).

Проще говоря: **workspace — это единица установки и настройки DevDuck**. Её удобно шарить в команде (через общий `workspace.config.yml`).

## Что такое **module** в DevDuck

**Module** — это просто набор инструментов, который расширяет функциональность DevDuck.
Модуль может приносить, например:

- **правила для AI-агента** (rules);
- **команды для AI-агента / IDE** (commands);
- **MCP-серверы** и/или их конфигурацию (MCP);
- **дополнительные API** (процедуры/роутеры модулей, которые потом доступны CLI/скриптам).

Помимо этого, модули часто содержат скрипты, хуки установки, провайдеры (provider system), шаблоны и прочие ресурсы — но концептуально это всё тот же “пакет расширений”.

## Встроенные модули (built-in)

Ниже — список модулей, которые идут “из коробки” в этом репозитории.

| Module | Зачем нужен | Заметки |
| --- | --- | --- |
| `core` | Базовая инфраструктура DevDuck (общие утилиты/файлы, на которые опираются остальные модули) | “Особенный” модуль: в этом репозитории хранит базовые ресурсы и используется как фундамент |
| `cursor` | Интеграция с Cursor IDE: команды, правила, генерация `.cursor/mcp.json` | Обычно ставится, если вы работаете в Cursor |
| `containers` | Docker-оркестрация для изоляции и параллельной генерации планов | Требует Docker (если вы не внутри контейнера) |
| `ci` | Единый интерфейс к CI через provider system (PR, checks, comments) | Провайдеры могут приходить из других модулей/репозиториев |
| `ci-github` | GitHub-провайдер для `ci` | Требует `GITHUB_TOKEN` |
| `dashboard` | TUI-дашборд для мониторинга задач DevDuck | Команда `/dashboard` |
| `email` | Единый интерфейс к почте через provider system | Команда `/email` |
| `email-gmail` | Gmail-провайдер для `email` | OAuth2 токен (в зависимости от реализации провайдера) |
| `evolution` | Возможность эволюции DevDuck (изменения самого DevDuck) | Ссылается на архитектурные правила/доки |
| `git` | Git-интеграция: генерация `.gitignore` | “Базовый” модуль для типового workspace |
| `github-ci` | Настройка GitHub Actions CI и проверка статуса CI | Команда `/github-setup-ci` |
| `issue-tracker` | Единый интерфейс к трекеру задач через provider system (issue/comments/PR/resources) | Провайдеры подключаются модульно |
| `issue-tracker-github` | GitHub-провайдер для `issue-tracker` | Требует `GITHUB_TOKEN` |
| `messenger` | Единый интерфейс к мессенджерам через provider system (чаты/история/файлы) | Кэш: `.cache/devduck/messenger/` |
| `messenger-telegram` | Telegram-провайдер для `messenger` | По умолчанию mock-режим (рекомендуется TDLib) |
| `messenger-yandex-messenger` | Yandex Messenger-провайдер для `messenger` | По умолчанию mock-режим |
| `plan` | Генерация и ведение implementation plan (под задачу/issue) | Команда `/plan <issueKey>` |
| `playwright` | Утилиты/гайдлайны для тестирования (в т.ч. VHS сценарии) | Добавляет скрипты `vhs*` в `package.json` workspace |
| `unsecure-sudo` | Временное выполнение sudo-команд (опасно) | Использовать с осторожностью |
| `vcs` | Правила и конвенции для коммитов/PR (VCS-agnostic) | Реализации под конкретный VCS (git/arc) могут быть внешними |

## Как подключать дополнительные модули

### Подключить репозиторий с модулями

В `workspace.config.yml` можно указать внешние источники модулей через `repos:` (Git или Arcadia). DevDuck загрузит модули из этих репозиториев при установке workspace.

Также можно передать репозитории через CLI (например, `node install.js --repos ...`).

### Создать свои модули прямо в workspace

Вы можете создавать модули прямо в workspace, положив их в:

- `./modules/<your-module>/...` (локальные модули workspace);
- `./projects/<project>/modules/<your-module>/...` (модули, живущие рядом с конкретным проектом).

Важно: **локальные модули workspace имеют приоритет** над встроенными — это удобно для кастомизации и разработки модулей.

